<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cubes Surprise ğŸ’›</title>
  <style>
    :root{
      --bg1:#0f1226;
      --bg2:#1a1f3d;
      --card:#141832cc;
      --text:#f4f6ff;
      --muted:#c9cdef;
      --accent:#ffcc66;
      --accent2:#ff6fb1;
      --line:#ffffff1a;
      --shadow: 0 14px 50px rgba(0,0,0,.45);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, #2b2f63 0%, transparent 60%),
                  radial-gradient(900px 650px at 80% 30%, #4a235a 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
    }
    .container{max-width:900px;margin:0 auto;padding:28px 16px 40px;}
    .hero{text-align:center;margin:18px 0 18px;}
    h1{margin:0 0 10px;font-size:clamp(26px,4vw,44px);letter-spacing:.2px;}
    .sub{margin:0;color:var(--muted);font-size:clamp(15px,2vw,18px);line-height:1.5;}
    .card{
      margin:18px auto; padding:22px;
      border:1px solid var(--line);
      background:var(--card);
      box-shadow:var(--shadow);
      border-radius:var(--radius);
      backdrop-filter: blur(10px);
    }
    .card.big{padding:26px;}
    .art-wrap{display:flex;justify-content:center;padding:18px 10px 8px;}
    .art{
      width:min(520px,100%);height:auto;
      filter:drop-shadow(0 20px 30px rgba(0,0,0,.35));
      user-select:none;-webkit-user-drag:none;
    }
    .photo-wrap{
      display:flex;
      justify-content:center;
      margin: 14px 0 6px;
    }

    .photo{
      width: min(560px, 100%);
      height: auto;
      border-radius: 16px;
      border: 1px solid var(--line);
      box-shadow:
        0 16px 40px rgba(0,0,0,.35),
        0 0 0 1px rgba(255,204,102,.35);
    }

    .options{display:flex;gap:12px;justify-content:center;padding:14px 0 4px;flex-wrap:wrap;}
    .choice{
      appearance:none; border:1px solid var(--line);
      background:linear-gradient(180deg,#ffffff18,#ffffff08);
      color:var(--text); padding:12px 18px; font-size:18px;
      border-radius:14px; cursor:pointer; min-width:88px;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
    }
    .choice:hover{transform:translateY(-2px);border-color:#ffffff2c;box-shadow:0 10px 30px rgba(0,0,0,.25);}
    .choice:active{transform:translateY(0);}
    .hint{text-align:center;min-height:22px;color:var(--accent2);margin:10px 0 0;font-weight:600;}
    .footer{text-align:center;margin-top:18px;color:#ffffff88;font-size:13px;}

    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 12px; border-radius:999px; font-weight:800;
      background:#2dffb31a; border:1px solid #2dffb34d; color:#b9ffe6;
      margin-bottom:12px;
    }
    .sep{border:0;border-top:1px solid var(--line);margin:18px 0;}
    .lead{color:var(--muted);font-size:17px;line-height:1.55;}
    .math{
      margin:14px 0 18px; padding:14px;
      border-radius:16px; border:1px solid var(--line); background:#00000025;
    }
    .caption{
      text-align: center;
      font-size: 16px;
      color: #ffffffd6;
      margin: 10px 0 6px;
      font-weight: 500;
    }
    .math-row{display:flex;gap:10px;justify-content:center;align-items:baseline;flex-wrap:wrap;font-size:20px;}
    .big-num{color:var(--accent);font-size:34px;font-weight:900;}
    h2{margin:16px 0 10px;font-size:clamp(20px,3vw,28px);}
    .cheezy{
      margin-top:14px; padding:14px 16px;
      border-radius:16px; border:1px dashed #ffffff2a;
      background:linear-gradient(180deg,#ff6fb112,transparent);
      color:#ffe9f4; line-height:1.6;
    }

    /* --- â€œPagesâ€ / slider --- */
    .view{display:none;}
    .view.active{display:block;}

    .card.big{
      padding: 26px;
      display:flex;
      flex-direction:column;
    }

    .slider{
      position:relative;
      overflow:hidden;
      border-radius: calc(var(--radius) - 2px);
      min-height: 62vh;
      flex: 1;
    }

    .track{
      display:flex;
      transition: transform 380ms ease;
      will-change: transform;
      position:relative;
    }

    .slide{
      min-width:100%;
      padding: 18px 6px;

      display:flex;
      flex-direction:column;
      justify-content:center;
      gap: 10px;

      position:relative;
      animation: fadeIn 420ms ease both;
    }

    .slide::before{
      content:"";
      position:absolute;
      inset: 0;
      background:
        radial-gradient(600px 280px at 15% 25%, rgba(255,204,102,.10), transparent 55%),
        radial-gradient(520px 260px at 85% 35%, rgba(255,111,177,.10), transparent 55%);
      pointer-events:none;
      opacity:.9;
      z-index: 0;
    }

    .slide > *{
      position:relative;
      z-index: 1;
    }

    @keyframes fadeIn{
      from{ opacity: 0; transform: translateY(6px); }
      to{ opacity: 1; transform: translateY(0); }
    }

    ..nav{
      display:grid;
      grid-template-columns: auto 1fr auto;
      align-items:center;              /* KEY: vertical alignment */
      gap: 16px;
      margin-top: 14px;
      user-select:none;
      min-height: 56px;                /* KEY: consistent height */
    }

    .nav-left, .nav-right{
      display:flex;
      align-items:center;
      gap: 10px;
    }

    .arrow{
      width:42px;
      height:42px;
      border-radius:999px;
      border:1px solid var(--line);
      background:linear-gradient(180deg,#ffffff18,#ffffff08);
      color:var(--text);
      cursor:pointer;
      display:grid;
      place-items:center;
      font-size: 20px;                 /* keeps arrow centered */
      line-height: 1;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    
    .arrow:hover{
      transform:translateY(-1px);
      border-color:#ffffff2c;
      background:linear-gradient(180deg,#ffffff22,#ffffff10);
    }


    .arrow:disabled{
      opacity:.35;
      cursor:not-allowed;
      transform:none;
    }

    .dots{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
    }
    .dot{
      width:9px;height:9px;border-radius:999px;
      background:#ffffff3a;
      border:1px solid #ffffff2a;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
    }
    .dot.active{
      background: var(--accent);
      transform: scale(1.25);
      border-color: #ffffff55;
    }

    .next-text{
      color:#ffffffb8;
      font-size:14px;
      white-space:nowrap;
      margin-left: 8px;   /* gives breathing room after dots */
    }

    .tiny{
      font-size: 15px;
      color: var(--muted);
      line-height: 1.6;
    }

    /* --- Full-screen confetti canvas (stage cannons) --- */
    #confettiCanvas{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
      opacity: 0;
      transition: opacity 160ms ease;
    }
    @media (max-width: 480px){
      .arrow{
        width:46px;
        height:46px;
      }
    }

  </style>
</head>
<body>
  <main class="container">

    <!-- VIEW 1: QUESTION -->
    <section id="view-question" class="view active">
      <header class="hero">
        <h1>Quick question, Sweety ğŸ’›</h1>
        <p class="sub">How many cubes are there in the picture below?</p>
      </header>

      <section class="card">
        <div class="art-wrap" aria-label="Three cubes illustration">
          <img class="art" src="cubes.svg" alt="An illustration of three cubes." />
        </div>

        <div class="options" role="group" aria-label="Answer choices">
          <button class="choice" data-answer="2">2</button>
          <button class="choice" data-answer="3">3</button>
          <button class="choice" data-answer="4">4</button>
        </div>

        <p id="hint" class="hint" aria-live="polite"></p>
      </section>

      <footer class="footer">
        <span>Made with â¤ï¸ by Sudhamsh</span>
      </footer>
    </section>

    <!-- VIEW 2: â€œPAGESâ€ AFTER CORRECT -->
    <section id="view-pages" class="view">
      <section class="card big">

        <div class="slider" aria-label="Birthday pages slider">
          <div id="track" class="track">

            <!-- PAGE 1 -->
            <div class="slide">
              <div class="badge">âœ… Correct!</div>
              <h1>Wohooo you got it right, Sweety! ğŸ’–</h1>
              <p class="tiny">âœ¨ğŸ’›âœ¨</p>
              <p class="sub">As always, you are always right, swee ğŸ˜˜</p>
              <hr class="sep" />
              <p class="lead">
                Okay okayâ€¦ now donâ€™t get overconfident ğŸ˜„<br />
                I have a tiny surprise for youâ€¦
              </p>
              <p class="tiny">Use the arrows below, swee ğŸ¤˜</p>
            </div>

            <!-- PAGE 2 -->
            <div class="slide">
              <h1>And wait a sec nowâ€¦</h1>
              <p class="tiny">âœ¨ğŸ’›âœ¨</p>
              <p class="lead">
                What does <b>3 cubes</b> even mean?<br />
                Letâ€™s figure it out âœ¨
              </p>

              <div class="math">
                <div class="math-row">
                  <span>3 cubes</span><span>=</span><span>3Â³</span><span>=</span><span class="big-num">27</span>
                </div>
              </div>

              <p class="tiny">
                (I know, I knowâ€¦ Iâ€™m a genius ğŸ˜Œ, But wait that's not it! go to the next page and find out more ğŸ˜‰)
              </p>
            </div>

            <!-- PAGE 3 -->
            <div class="slide">
              <h1>Wish you a very Happiee 27th Birthday, Sweety ğŸ‚</h1>
              <p class="tiny">âœ¨ğŸ’›âœ¨</p>

              <div class="photo-wrap">
                <img class="photo" src="swee_27.png" alt="Sweety 27th birthday photo" />
              </div>

              <p class="caption">
                Me and our darling Prabhas celebrating your birthday sweety ğŸ˜„ğŸ¤ğŸ‚
              </p>

              <p class="lead">
                May God bless you with sound knowledge and good health for the rest of your life.
              </p>
              <p class="tiny">
                And may your smile stay exactly like this and light up this entire worldâ€¦ forever ğŸ’›
              </p>
            </div>

            <!-- PAGE 4 -->
            <div class="slide">
              <h1>One last thingâ€¦ ğŸ’</h1>
              <p class="tiny">âœ¨ğŸ’›âœ¨</p>
              <div class="cheezy">
                <p>
                  Last but not the least ğŸ˜„<br />
                  Youâ€™ve successfully completed <b>27%</b> of your lifeâ€¦
                  and the next <b>73%</b> is going to be a beautiful adventure
                  with even more happiness and joyâ€¦ because <b>Sudhamsh is here now</b>, Sweety ğŸ˜‰ğŸ’
                </p>
                <p class="tiny" style="margin-top:8px;">
                  Thank you for existing, coming into my life and being you Sweety ğŸ¤
                </p>

              </div>

              <p class="tiny" style="margin-top:14px;">
                Always yours,<br />
                <b>Sudhamsh</b> ğŸ’›
              </p>
            </div>

          </div>
        </div>

        <!-- Bottom navigation (arrows + dots + â€œgo nextâ€ text) -->
        <div class="nav" aria-label="Slider navigation">
          <div class="nav-left">
            <button id="prevBtn" class="arrow" aria-label="Previous page">â†</button>
          </div>

          <div id="dots" class="dots" aria-label="Page indicators"></div>

          <div class="nav-right">
            <span id="nextText" class="next-text">Go to next page swee ğŸ¤˜</span>
            <button id="nextBtn" class="arrow" aria-label="Next page">â†’</button>
          </div>
        </div>

      </section>

      <footer class="footer">
        <button id="backToQuestion" class="choice" style="min-width:auto;">â† Back to cubes</button>
      </footer>
    </section>

  </main>

  <!-- Full-screen confetti overlay -->
  <canvas id="confettiCanvas" aria-hidden="true"></canvas>

  <script>
    (function () {
      const viewQuestion = document.getElementById("view-question");
      const viewPages = document.getElementById("view-pages");

      const hint = document.getElementById("hint");
      const choices = document.querySelectorAll(".choice[data-answer]");

      const track = document.getElementById("track");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const dotsWrap = document.getElementById("dots");
      const nextText = document.getElementById("nextText");
      const backToQuestion = document.getElementById("backToQuestion");

      const slides = Array.from(track.querySelectorAll(".slide"));
      const total = slides.length;
      let idx = 0;

      // ---------- Stage-cannon confetti (NO emojis) ----------
      const confetti = (() => {
        const canvas = document.getElementById("confettiCanvas");
        const ctx = canvas.getContext("2d");

        let W = 0, H = 0, dpr = 1;
        let particles = [];
        let raf = null;
        let running = false;

        function resize() {
          dpr = Math.max(1, window.devicePixelRatio || 1);
          canvas.width = Math.floor(window.innerWidth * dpr);
          canvas.height = Math.floor(window.innerHeight * dpr);
          canvas.style.width = window.innerWidth + "px";
          canvas.style.height = window.innerHeight + "px";

          // draw in CSS pixels
          ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
          W = window.innerWidth;
          H = window.innerHeight;
        }

        function rand(min, max){ return Math.random() * (max - min) + min; }

        // confetti palette (poppers vibe)
        const colors = [
          "#ffcc66", "#ff6fb1", "#b9ffe6", "#ffffff", "#c9cdef",
          "#ffd1e8", "#ffe7a3"
        ];

        function makeParticle(x, y, angleRad, speed) {
          const isStreamer = Math.random() < 0.22; // some long streamers
          const w = isStreamer ? rand(2, 4) : rand(4, 8);
          const h = isStreamer ? rand(18, 34) : rand(6, 12);

          return {
            x, y,
            vx: Math.cos(angleRad) * speed + rand(-0.6, 0.6),
            vy: Math.sin(angleRad) * speed + rand(-0.6, 0.6),
            g: rand(0.12, 0.18),
            rot: rand(0, Math.PI * 2),
            vr: rand(-0.18, 0.18),
            w, h,
            color: colors[(Math.random() * colors.length) | 0],
            life: rand(120, 160),
            age: 0,
            drag: rand(0.985, 0.995)
          };
        }

        function drawParticle(p) {
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.color;

          // slight 3D feel: draw a small highlight strip sometimes
          ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
          if (Math.random() < 0.08) {
            ctx.globalAlpha = 0.35;
            ctx.fillStyle = "#ffffff";
            ctx.fillRect(-p.w/2, -p.h/2, Math.max(1, p.w/3), p.h);
            ctx.globalAlpha = 1;
          }
          ctx.restore();
        }

        function step() {
          ctx.clearRect(0, 0, W, H);

          particles = particles.filter(p => p.age < p.life);

          for (const p of particles) {
            p.vx *= p.drag;
            p.vy *= p.drag;

            p.vy += p.g;
            p.x += p.vx;
            p.y += p.vy;
            p.rot += p.vr;
            p.age++;

            // fade towards the end
            const t = 1 - (p.age / p.life);
            ctx.globalAlpha = Math.max(0, Math.min(1, t));

            drawParticle(p);
            ctx.globalAlpha = 1;
          }

          if (particles.length) {
            raf = requestAnimationFrame(step);
          } else {
            stop();
          }
        }

        function start() {
          if (running) return;
          running = true;
          canvas.style.opacity = "1";
          raf = requestAnimationFrame(step);
        }

        function stop() {
          running = false;
          canvas.style.opacity = "0";
          if (raf) cancelAnimationFrame(raf);
          raf = null;
          particles = [];
        }

        function burstCannons() {
          resize();

          // Two cannons: bottom-left and bottom-right
          const leftX = W * 0.10;
          const rightX = W * 0.90;
          const y = H * 0.82;

          // Emit arcs: left shoots to the right/up, right shoots to the left/up
          function emit(x, baseAngle, spread, count) {
            for (let i = 0; i < count; i++) {
              const a = baseAngle + rand(-spread, spread);
              const speed = rand(7.5, 12.5);
              particles.push(makeParticle(x + rand(-10, 10), y + rand(-8, 8), a, speed));
            }
          }

          // angles in radians
          const deg = (d) => d * Math.PI / 180;

          // Left cannon: 300Â°..340Â° (up-right)
          emit(leftX, deg(-55), deg(18), 95);
          // Right cannon: 200Â°..240Â° (up-left)
          emit(rightX, deg(-125), deg(18), 95);

          // a small center sprinkle for fullness
          const centerX = W * 0.50;
          emit(centerX, deg(-90), deg(20), 45);

          start();
        }

        window.addEventListener("resize", () => { if (running) resize(); });

        return { burstCannons };
      })();
      // -------------------------------------------------------

      function show(which) {
        if (which === "pages") {
          viewQuestion.classList.remove("active");
          viewPages.classList.add("active");
          window.location.hash = "#pages";
          window.scrollTo({ top: 0, behavior: "smooth" });
          render();
        } else {
          viewPages.classList.remove("active");
          viewQuestion.classList.add("active");
          if (hint) hint.textContent = "";
          window.location.hash = "";
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      }

      function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }

      function go(n) {
        idx = clamp(n, 0, total - 1);
        render();
      }

      function render() {
        track.style.transform = `translateX(${-idx * 100}%)`;

        prevBtn.disabled = idx === 0;
        nextBtn.disabled = idx === total - 1;

        // dots
        dotsWrap.innerHTML = "";
        for (let i = 0; i < total; i++) {
          const d = document.createElement("button");
          d.className = "dot" + (i === idx ? " active" : "");
          d.setAttribute("aria-label", `Go to page ${i + 1}`);
          d.addEventListener("click", () => go(i));
          dotsWrap.appendChild(d);
        }

        // next text
        if (idx === 0) nextText.textContent = "Curious already? go on swee ğŸ”¥";
        else if (idx === 1) nextText.textContent = "Thereâ€™s more waiting for you ğŸ’«";
        else if (idx === 2) nextText.textContent = "One last pageâ€¦ donâ€™t rush ğŸ’";
        else nextText.textContent = "Thatâ€™s it swee ğŸ˜˜";

        // ğŸ‰ Fire stage-cannon confetti ONLY on Page 3 (idx = 2)
        if (idx === 2 && !window.__cannonFired) {
          window.__cannonFired = true;
        
          // boom #1
          confetti.burstCannons();
        
          // boom #2 (after a short delay)
          setTimeout(() => confetti.burstCannons(), 500);
        }
        
        if (idx !== 2) {
          window.__cannonFired = false;
        }


      // Answer buttons
      choices.forEach((btn) => {
        btn.addEventListener("click", () => {
          const ans = btn.getAttribute("data-answer");
          if (ans === "3") {
            idx = 0;
            show("pages");
          } else {
            if (hint) hint.textContent = "Hehe not this one ğŸ˜„ Try again, Sweety ğŸ’•";
            btn.animate(
              [
                { transform: "translateX(0)" },
                { transform: "translateX(-6px)" },
                { transform: "translateX(6px)" },
                { transform: "translateX(0)" }
              ],
              { duration: 220, iterations: 1 }
            );
          }
        });
      });

      // arrows
      prevBtn.addEventListener("click", () => go(idx - 1));
      nextBtn.addEventListener("click", () => go(idx + 1));

      // keyboard support
      window.addEventListener("keydown", (e) => {
        if (!viewPages.classList.contains("active")) return;
        if (e.key === "ArrowLeft") go(idx - 1);
        if (e.key === "ArrowRight") go(idx + 1);
      });

      // back
      backToQuestion.addEventListener("click", () => show("question"));

      // load hash
      if (window.location.hash === "#pages") show("pages");
      else render();
    })();
  </script>
</body>
</html>
